<div class="container-fluid shadow-lg p-3 mb-5 rounded border border-2 contenedorPrincipal">

    <div class="row borde  animate__animated animate__fadeInDown">
        <div class="col-12">
            <h2 id="tituloComponente" *ngIf="banderaEdicionReclamo==false">Nuevo Reclamo</h2>
            <h2 id="tituloComponente" *ngIf="banderaEdicionReclamo==true"> Actualizar Reclamo</h2>
        </div>
    </div>

    <div class="  animate__animated animate__fadeIn" *ngFor="let item of arregloDetalleReclamo">

        <div class="container-table100">
            <div class="wrap-table100">
                <div class="table100">
                    <table>
                        <thead>
                            <tr class="table100-head">
                                <!-- <th class="column1">Altura</th> -->
                                <th class="column2">Descripción</th>
                                <th class="column3">Dirección</th>
                                <th class="column4">Dominio</th>
                                <th class="column5">Fecha</th>
                                <th class="column6">Foto</th>
                                <th class="column7">Hora</th>
                                <th class="column8">Motivo</th>
                                <th class="column9">Marca</th>
                                <th class="column10">Modelo</th>
                                <th class="column11">Tipo Reclamo </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <!-- <td class="column1">{{item.altura}} </td> -->
                                <td class="column2">{{item.descripcion}}</td>
                                <td class="column3">{{item.direccion}}</td>
                                <td class="column4">{{item.dominio}}</td>
                                <td class="column5">{{item.fecha}} </td>
                                <td class="column6"><img class="rounded-3" src="{{item.foto}}" alt="Foto"
                                        style="width: 150px; height: 100px;"></td>
                                <td class="column7">{{item.hora}}</td>
                                <td class="column8">{{item.nombreRecAmbiental}}</td>
                                <td class="column9">{{item.nombreMarca}}</td>
                                <td class="column10">{{item.nombreModelo}}</td>
                                <td class="column11">{{item.nombreTRec}}</td>
                            </tr>

                        </tbody>
                    </table>
                </div>
            </div>
        </div><!--.container-table100 -->



    </div>



    <div class="row ">
        <div class="well well-sm">
            <form class="form-horizontal" method="post">
                <fieldset>
                    <div class="row animate__animated animate__fadeIn" style="margin: 0 auto">
                        <div class="col-md-5">

                            <!-- Tipo Reclamo -->
                            <!--  <div class="form-group">
                                <span class=" titulos col-md-1 col-md-offset-2 text-center"> <i
                                        class="fas fa-tasks" style="font-size: 25px;"></i> Tipo Reclamo</span>
                                <div class="col-md-12 text-center ">
                                    <select class="form-select form-select-sm" aria-label=".form-select-sm example"
                                        [formControl]="tipoReclamoCtrl" (change)="dataChangedTipoReclamo($event)">
                                        <option value="{{item.idTipoReclamo}}" style="color: black;"
                                            *ngFor="let item of Tiporecla">
                                            {{item.nombre}}
                                        </option>
                                    </select>
                                </div>
                            </div> -->
                            <div class="input-group flex-nowrap input_reclamo" data-bs-toggle="tooltip"
                                data-bs-placement="top" title="Tipo De Reclamo">

                                <span class="input-group-text" id="addon-wrapping"><i
                                        class="bi bi-list-task icono__input"></i></span>
                                <select class="form-select form-select-sm" aria-label=".form-select-sm example"
                                    [formControl]="tipoReclamoCtrl" (change)="dataChangedTipoReclamo($event)">
                                    <option value="" disabled> --- Tipo de Reclamo no selecionado --- </option>
                                    <option value="{{item.idTipoReclamo}}" style="color: black;"
                                        *ngFor="let item of Tiporecla">

                                        {{item.nombre}}

                                    </option>

                                </select>


                            </div>


                            <!-- Reclamo Ambiental -->
                            <!--  <div class="form-group" id="ReclamoAmbiental" *ngIf="selectIdTipoReclamo==1">
                                <span class="titulos col-md-1 col-md-offset-2 text-center"><i
                                        class="fas fa-exclamation-triangle" style="font-size: 25px;">
                                    </i> Reclamo Ambiental</span>

                                <div class="col-md-12 text-center">
                                    <select class="form-select form-select-sm" aria-label=".form-select-sm example"
                                        [formControl]="reclamoAmbientalCtrl" (change)="obtenerID($event)">
                                        <option id="dato" value="{{item.idReclamoAmbiental}}" style="color: black;"
                                            *ngFor="let item of ReclamoAmbie">{{item.nombreRecAmbiental}}

                                        </option>
                                    </select>

                                </div>
                            </div>  -->

                            <div class="input-group flex-nowrap input_reclamo" id="ReclamoAmbiental"
                                *ngIf="selectIdTipoReclamo==1" data-bs-toggle="tooltip" data-bs-placement="top"
                                title="Causas Ambientales">

                                <span class="input-group-text" id="addon-wrapping"><i
                                        class="bi bi-droplet-half icono__input"></i></span>
                                <select class="form-select form-select-sm" aria-label=".form-select-sm example"
                                    [formControl]="reclamoAmbientalCtrl" (change)="obtenerID($event)">
                                    <option value="" disabled>--- Causas Ambientales no seleccionado ---</option>
                                    <option id="dato" value="{{item.idReclamoAmbiental}}" style="color: black;"
                                        *ngFor="let item of ReclamoAmbie">{{item.nombreRecAmbiental}}

                                    </option>

                                </select>

                            </div>

                            <!-- Marca Auto -->
                            <!-- <div class="form-group" id="ReclamoVial" *ngIf="selectIdTipoReclamo==2">
                                <span class="titulos col-md-1 col-md-offset-2 text-center"><i class="fas fa-car-side"
                                        style="font-size: 25px;">
                                    </i> Marca de auto</span>
                                <div class="col-md-12 text-center">
                                    <select class="form-select form-select-sm" aria-label=".form-select-sm example"
                                        [formControl]="marcaAutoCtrl" (change)="dataChangedIdMarcaVehiculo($event)">
                                        <option value="{{item.idMarca}}" style="color: black;" *ngFor="let item of Mar">
                                            {{item.marcaVehiculo}}
                                        </option>
                                    </select>                  
                                </div>
                            </div> -->
                            <div class="input-group flex-nowrap input_reclamo" id="ReclamoVial"
                                *ngIf="selectIdTipoReclamo==2" data-bs-toggle="tooltip" data-bs-placement="top"
                                title="Marca de Auto">

                                <span class="input-group-text" id="addon-wrapping"><i
                                        class="bi bi-car-front-fill icono__input"></i></span>
                                <select class="form-select form-select-sm" aria-label=".form-select-sm example"
                                    [formControl]="marcaAutoCtrl" (change)="dataChangedIdMarcaVehiculo($event)">
                                    <option value="" disabled> --- Marca de Auto no seleccionado --- </option>
                                    <option value="{{item.idMarca}}" style="color: black;" *ngFor="let item of Mar">
                                        {{item.marcaVehiculo}}
                                    </option>
                                </select>
                            </div>

                            <!-- Modelo auto -->
                            <!--    <div class="form-group" id="ReclamoVial" *ngIf="selectIdTipoReclamo==2">
                                <span class="titulos col-md-1 col-md-offset-2 text-center"><i class="fas fa-list-ol"
                                        style="font-size: 25px;"></i> Modelo de auto</span>
                                <div class="col-md-12 text-center">
                                    <select class="form-select form-select-sm" aria-label=".form-select-sm example"
                                        [formControl]="modeloAutoCtrl" (change)="obtenerIDModeloVehiculo($event)">
                                        <option value="{{item.idModelo}}" style="color: black;"
                                            *ngFor="let item of Mod ">
                                            {{item.modeloVehiculo}}
                                        </option>
                                    </select>
                                </div>
                            </div> -->

                            <div class="input-group flex-nowrap input_reclamo" id="ReclamoVial"
                                *ngIf="selectIdTipoReclamo==2" data-bs-toggle="tooltip" data-bs-placement="top"
                                title="Modelo de Auto">

                                <span class="input-group-text" id="addon-wrapping"><i
                                        class="bi bi-list-ol icono__input"></i></span>
                                <select class="form-select form-select-sm" aria-label=".form-select-sm example"
                                    [formControl]="modeloAutoCtrl" (change)="obtenerIDModeloVehiculo($event)">
                                    <option value="" disabled>Modelo de Vehículo no selecionado </option>
                                    <option value="{{item.idModelo}}" style="color: black;" *ngFor="let item of Mod ">
                                        {{item.modeloVehiculo}}
                                    </option>
                                </select>
                            </div>


                            <!-- Dominio Auto -->
                            <!-- <div class="form-group" id="ReclamoVial" *ngIf="selectIdTipoReclamo==2">
                                <span class="titulos col-md-1 col-md-offset-2 text-center"><i class="fas fa-car"
                                        style="font-size: 25px;"></i> Dominio del Vehículo</span>
                                <div class="col-md-12 text-center">
                                    <input id="dominio" name="" type="text" placeholder="Dominio"
                                        class="form-control inputs" [formControl]="dominioCtrl">
                                </div>
                            </div> -->

                            <div class="input-group flex-nowrap input_reclamo" id="ReclamoVial"
                                *ngIf="selectIdTipoReclamo==2" data-bs-toggle="tooltip" data-bs-placement="top"
                                title="Dominio de Auto">

                                <span class="input-group-text" id="addon-wrapping"><i
                                        class="bi bi-123 icono__input"></i></span>

                                <input id="dominio" name="" type="text" placeholder="Dominio" class="form-control "
                                    [formControl]="dominioCtrl">

                            </div>

                            <div class="input-group flex-nowrap input_reclamo" data-bs-toggle="tooltip"
                                data-bs-placement="top" title="Color del Auto" *ngIf="selectIdTipoReclamo==2">

                                <span class="input-group-text" id="addon-wrapping"><i
                                        class="bi bi-palette icono__input"></i></span>
                                <input name="text" type="text" placeholder="Color" class="form-control "
                                    [formControl]="colorAutoCtrl">

                            </div>

                            <!-- Fecha -->
                            <!--   <div class="form-group">
                                <span class="titulos col-md-1 col-md-offset-2 text-center"><i
                                    class="fa fa-calendar bigicon" style="color: black; font-size: 25px;"></i>
                                    Fecha</span> 
                                <div class="col-md-12 text-center">
                                    <input id="Fecha" name="name" type="date" placeholder="Fecha"
                                        class="form-control inputs" [formControl]="fechaCtrl">
                                </div>
                            </div> -->
                            <div class="input-group flex-nowrap input_reclamo" data-bs-toggle="tooltip"
                                data-bs-placement="top" title="Fecha">
                                <span class="input-group-text" id="addon-wrapping"><i
                                        class="bi bi-calendar3 icono__input"></i></span>
                                <input id="Fecha" name="name" type="date" placeholder="Fecha" class="form-control "
                                    [formControl]="fechaCtrl">
                            </div>

                            <!-- Hora -->
                            <!-- <div class="form-group">
                                <span class="titulos col-md-1 col-md-offset-2 text-center"><i
                                        class="fa fa-clock-o bigicon" style="color: black; font-size: 25px;"></i>
                                    Hora</span>
                                <div class="col-md-12 text-center">
                                    <input id="Hora" name="tiempo" type="time" placeholder={{time}}
                                        class="form-control inputs" [formControl]="horaCtrl"
                                        (click)='obtenerHoraActual()'>
                                </div>
                            </div> -->
                            <div class="input-group flex-nowrap input_reclamo" data-bs-toggle="tooltip"
                                data-bs-placement="top" title="Hora">

                                <span class="input-group-text" id="addon-wrapping"><i
                                        class="bi bi-clock-history icono__input"></i></span>
                                <input id="Hora" name="tiempo" type="time" placeholder={{time}} class="form-control "
                                    [formControl]="horaCtrl" (click)='obtenerHoraActual()'>

                            </div>


                            <!-- Ubicacion - Calee -->
                            <!-- <div class="form-group">
                                <span class="titulos col-md-1 col-md-offset-2 text-center"><i
                                        class="fa fa-map-marker bigicon" style="color: black; font-size: 25px;"></i>
                                    Dirección</span>
                                <div class="col-md-12 text-center">
                                    <input id="Ubicacion" name="phone" type="text" placeholder="No ingresó su ubicación"
                                        class="form-control inputs" [formControl]="ubicacionCtrl">
                                </div>
                            </div> -->
                            <div class="input-group flex-nowrap input_reclamo" data-bs-toggle="tooltip"
                                data-bs-placement="top" title="Calle">

                                <span class="input-group-text" id="addon-wrapping"><i
                                        class="bi bi-geo-alt icono__input"></i></span>
                                <input id="Ubicacion" name="phone" type="text" placeholder="Calle y Altura"
                                    class="form-control " [formControl]="ubicacionCtrl" #txtQuery
                                    (keyup)="onQueryChanged(txtQuery.value)">

                            </div>

                            <!-- <Altura direccion reclamo> -->
                            <!-- <div class="form-group">
                                <span class="titulos col-md-1 col-md-offset-2 text-center"><i
                                        class="fa fa-sort-numeric-up-alt bigicon"
                                        style="color: black; font-size: 25px;"></i> Altura</span>
                                <div class="col-md-12 text-center">
                                    <input id="Altura" name="phone" type="number"
                                        placeholder="No ingresó su altura de calle" class="form-control inputs"
                                        [formControl]="alturaCtrl">
                                </div>
                            </div> -->

                            <!--   <div class="input-group flex-nowrap input_reclamo" data-bs-toggle="tooltip"
                                data-bs-placement="top" title="Tipo De Reclamo">
                                <span class="input-group-text" id="addon-wrapping"><i
                                        class="bi bi-sort-numeric-up-alt icono__input"></i></span>
                                <input id="Altura" name="phone" type="number" placeholder="Altura de la calle"
                                    class="form-control " [formControl]="alturaCtrl">
                            </div> -->


                        </div>


                        <!-- columna que divide en 2 partes -->
                        <div class="col-md-7">

                            <!-- Foto -->
                            <div class="col-md-12">

                                <div class=" input_reclamo">
                                
                              <!--       <textarea class="form-control " id="UrlFoto" name="urlFoto" placeholder="URL Foto"
                                        rows="1" [formControl]="urlFotoCtrl"></textarea> -->

                                    <div class="form-group input_reclamo">

                                        <div class="col-md-12 text-center p-0">
                                            <textarea class="form-control DescripcionReclamo" name="message"
                                                placeholder="Describa la causa del reclamo" rows="4"
                                                [formControl]="descripcionCtrl"></textarea>
                                        </div>
                                    </div>

                                </div>

                                <div class="input_reclamo">
                                    <div class="row">
                                       

                                        <!-- subir archivos -->
                                        <div class="co-12 col-sm-12 ">
                                            <div class="input-group mb-3 mt-1 ">
                                                <input type="file" class="form-control" id="inputGroupFile02">
                                                <!--  -->
                                                <label class="input-group-text" for="inputGroupFile02"><i
                                                        class="bi bi-image"></i></label>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Camara -->
                                    <div class="camera-container">
                                        <div class="row">
                                    
                                            <div class="col-12 col-sm-6">
                                                <button class="btn_ancho btn btn-primary" (click)="startCamera()"><i class="bi bi-camera"></i> Iniciar
                                                </button>
                                            </div>
                                    
                                            <div class="col-12 col-sm-6">
                                                <button *ngIf="isCameraStarted" class=" btn_ancho btn btn-primary" (click)="capturePhoto()" [disabled]="!isCameraStarted">Capturar</button>
                                            </div>
                                    
                                    
                                            <div class="row">
                                                <div class="col-6">
                                                    <video #videoPlayer [hidden]="!isCameraStarted"></video>
                                                    <canvas #canvas style="display: none;"></canvas>
                                                </div>
                                                <div class="col-6">
                                                    <img [src]="capturedPhoto" *ngIf="capturedPhoto" class="captured-photo">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                

                                <!-- Estados Reclamos -->
                                <div class="form-group"
                                    *ngIf="banderaEdicionReclamo==true && (this.usuario.idRol==1 || this.usuario.idRol==2)">
                                    <h5>Estados del reclamo</h5>
                                    <div class="form-check form-check-inline" *ngFor="let item of Tiporecla">
                                        <input class="form-check-input" (change)="dataChangedEstadoReclamo($event)"
                                            type="radio" name="r" id="inlineRadio1" value="{{item.idTipoReclamo}}">
                                        <label class="form-check-label" for="inlineRadio1">{{item.nombre}}</label>
                                    </div>

                                    <div class=" text-center ">
                                        <select class="" name="example" [formControl]="estadoReclamoCtrl"
                                            style="width: 100%;">
                                            <option value="" disabled> --- Tipo de Estado no selecionado ---</option>
                                            <option value="{{item.idEstado}}" name="Esta"
                                                *ngFor="let item of objetEstadoReclamo">
                                                {{item.nombre}}
                                            </option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                        </div> <!-- .descripcion -->

                        <!-- Mapa -->
                        <div class="form-group input_reclamo shadow-lg p-3 rounded border border-2  ">
                            <div *ngIf="banderaVerMapa!='editar'" class="col-12  ">
                                <app-map-screen-reclamo></app-map-screen-reclamo>
                            </div>
                            <div *ngIf="banderaVerMapa=='editar'" class="col-12  ">
                                <div #mapDiv class="map-container rounded">
                                    <app-busqueda-lugares-reclamo></app-busqueda-lugares-reclamo>
                                </div>
                            </div>
                        </div>

                    </div>

                    <!-- Descripcion del reclamo a editar / solo aparece cuando vamos del historial hacia el reclamo -->


                    <div class="row">



                        <div class=" col-12 col-sm-4 animate__animated  animate__fadeInUp"
                            *ngIf="banderaEdicionReclamo==false">
                            <!--text-center d-inline-block col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6 botones -->

                            <button type="button" class="btn btn-success botones "
                                [disabled]="( (tipoReclamoCtrl.invalid && (reclamoAmbientalCtrl.invalid && marcaAutoCtrl.invalid && dominioCtrl.invalid)) || fechaCtrl.invalid || horaCtrl.invalid || ubicacionCtrl.invalid ||  descripcionCtrl.invalid)"
                                (click)="registrarReclamo()" data-bs-toggle="tooltip" data-bs-placement="top"
                                title="Enviar Reclamo"> <!--  || alturaCtrl.invalid -->
                                <i class="far fa-check-circle fa-lg"></i>Enviar

                            </button>
                        </div>


                        <div class="col-12 col-sm-4 animate__animated animate__fadeInUp"
                            *ngIf="banderaEdicionReclamo==true"><!-- true -->

                            <button type="button" class="btn btn-outline-success botones" data-bs-toggle="tooltip"
                                data-bs-placement="top" title="Actualizar Reclamo"
                                (click)="MetodoActualizarReclamo()"><i
                                    class="fas fa-sync-alt fa-lg"></i>Actualizar</button>
                        </div>


                        <div class=" col-12 col-sm-4 animate__animated animate__fadeInUp">
                            <button type="button" class="btn btn-outline-danger botones" data-bs-toggle="tooltip"
                                data-bs-placement="top" title="Cancelar Reclamo" (click)="limpiarPantalla()"><i
                                    class="fas fa-times fa-lg"></i>
                                Cancelar</button>
                        </div>


                        <div class=" col-12 col-sm-4 animate__animated animate__fadeInUp">
                            <button type="button" class="btn btn-outline-primary botones" data-bs-toggle="tooltip"
                                data-bs-placement="top" title="Regresar al Historial" (click)='regresarHistorial()'><i
                                    class="fas fa-undo"></i> Mi
                                Historial</button>
                        </div>


                    </div>



                </fieldset>



            </form>
        </div>

    </div>
</div>